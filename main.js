var navLinks = document.getElementById("navLinks");
function showMenu() {
    navLinks.style.right = "0";
}
function hideMenu() {
    navLinks.style.right = "-200px";
}

const swiperElement = document.querySelector(".mySwiper");

if (swiperElement) {
    /* --- Popup --- */
    
    var swiper = new Swiper(".mySwiper", {
        grabCursor: true,
        loop: true,
        
        breakpoints: {
            // เมื่อหน้าจอเล็กกว่า 700px
            0: {
                slidesPerView: 1,
                slidesPerGroup: 1,
                spaceBetween: 10
            },
            // เมื่อหน้าจอเล็กกว่า 1024px
            701: {
                slidesPerView: 2,
                slidesPerGroup: 2,
                spaceBetween: 20
            },
            // เมื่อหน้าจอใหญ่กว่า 1024px
            1025: {
                slidesPerView: 3,
                slidesPerGroup: 3,
                spaceBetween: 30
            }
        },
        
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });

    //Popup (Modal)
    const modal = document.getElementById('trailerModal');
    const iframe = document.getElementById('trailerFrame');
    const closeBtn = document.querySelector('.close-modal');
    const watchBtns = document.querySelectorAll('.watch');
    
    watchBtns.forEach(btn => {
        
        btn.addEventListener('click', (event) => {
            event.preventDefault(); 
            event.stopPropagation();

            const trailerId = btn.getAttribute('data-trailer-id');
            if (trailerId) {
                iframe.src = `https://www.youtube.com/embed/${trailerId}?autoplay=1`;
                modal.classList.add('visible');
            }
        });
    });
    
    function closeModal() {
        modal.classList.remove('visible');
        iframe.src = '';
    }
    
    closeBtn.addEventListener('click', closeModal);
    
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });

}


/* --- reviews.html --- */
if (document.body.classList.contains('page-review-detail')) {

    //ตรงนี้เอาไว้ใส่ข้อความรีวิว
    const reviewDatabase = {
        'evil-dead': {
            title: "Evil Dead Rise",
            year: "2023",
            rating: "18+",
            duration: "1h 37m",
            poster: "https://static1.colliderimages.com/wordpress/wp-content/uploads/2023/01/evil-dead-rise-poster.jpg",
            score: "8.5",
            reviewHtml: `
                <p>การกลับมาของแฟรนไชส์ "ผีอมตะ" ในตำนาน ที่คราวนี้ย้ายสมรภูมิจากกระท่อมกลางป่าสู่ตึกอพาร์ตเมนต์กลางเมืองลอสแอนเจลิส</p>
                <p>Evil Dead Rise เปลี่ยนบรรยากาศจากกระท่อมกลางป่ามาเป็นอพาร์ตเมนต์ในเมือง แต่ยังคงรักษาเอกลักษณ์ "ความเลือดสาด" ไว้ได้อย่างครบถ้วน หนังเดินเรื่องไว ไม่เสียเวลาปูพื้นนาน เมื่อเข้าสู่ช่วงสยองขวัญแล้วก็ใส่มาแบบไม่ยั้งจนจบเรื่อง ไม่ปล่อยให้คนดูได้พักหายใจ</p>
                <p>จุดขายสำคัญคือความโหดที่สร้างสรรค์และชวนแหวะ โดยเฉพาะฉาก "ที่ขูดชีส" ซึ่งกลายเป็นภาพจำสุดเสียวไส้ รวมถึงการแสดงของตัวละครแม่ที่ถูกผีสิงทำออกมาได้น่ากลัวและคุกคามมาก ปริมาณเลือดในเรื่องนี้จัดมาแบบท่วมจอสะใจคอหนังสาย Hardcore ที่ต้องการเห็นความดิบเถื่อน</p>
                <p>
                <h3>ทำไมถึงควรดู?</h3>
                <p>นี่คือหนังสยองขวัญที่ยกระดับวงการ... มันจะทำให้คุณฝันร้ายไปอีกหลายคืน มันคือความบันเทิงแบบสุดขั้วสำหรับแฟนหนังสยองขวัญตัวจริง เนื้อเรื่องดูง่าย ไม่ซับซ้อน เน้นความบันเทิงและความระทึกใจเป็นหลัก เป็นหนังที่รู้จุดขายของตัวเองดี เหมาะสำหรับคนที่อยากดูหนังผีที่มัน สะใจ และโหดแบบสุดทางโดยไม่ต้องคิดเยอะ</p>
            `
        },
        'substance': {
            title: "The Substance",
            year: "2024",
            rating: "18+",
            duration: "2h 20m",
            poster: "https://i.ebayimg.com/images/g/q8MAAOSwGIhnJmyC/s-l1600.webp",
            score: "9.0",
            reviewHtml: `
                <p>The Substance คือหนัง Body Horror ที่ตีแผ่ความหลงใหลในความงามและความกลัวความแก่ได้อย่างเจ็บแสบ เนื้อเรื่องเล่าถึงดาราตกยุคที่เลือกใช้สารลึกลับเพื่อสร้างร่างใหม่ที่สาวกว่าและสมบูรณ์แบบกว่า การแสดงของ Demi Moore และ Margaret Qualley ถือว่ายอดเยี่ยมและแบกหนังทั้งเรื่องไว้ได้อยู่หมัด</p>
                <p>จุดขายหลักคือความ "ถึงลูกถึงคน" ในงานภาพและเสียง หนังจงใจใส่ฉากที่ชวนคลื่นไส้มาอย่างต่อเนื่อง ไม่ว่าจะเป็นเสียงกระดูกลั่น เสียงเข็มเจาะ หรือภาพความผิดปกติของร่างกายที่สมจริงจนน่าขนลุก มันไม่ใช่แค่หนังเลือดสาดทั่วไป แต่เป็นหนังที่ทำให้คนดูรู้สึกอึดอัดทางกายภาพได้ตลอดเวลา</p>
                <p>ช่วงท้ายเรื่องคือความบ้าคลั่งขั้นสุดที่ทิ้งความสมจริง แล้วสาดความสยองใส่คนดูแบบไม่ยั้ง กลายเป็นฉากจบที่ทั้งตลกร้ายและวินาศสันตะโร ซึ่งอาจทำให้ผู้ชมเสียงแตกได้ แต่ปฏิเสธไม่ได้ว่านี่คือหนังที่สร้างประสบการณ์การรับชมที่รุนแรงและน่าจดจำที่สุดเรื่องหนึ่งของปี</p>
                <h3>ทำไมถึงควรดู?</h3>
                <p>การแสดงระดับถวายหัวของ Demi Moore ที่ทุ่มสุดตัว ผสมผสานกับงานเมคอัพเอฟเฟกต์สุดสมจริงที่สร้างความสยดสยองได้อย่างมีมิติ ภายใต้ความโหดแหวะคือการวิพากษ์ค่านิยมความงามของสังคมได้อย่างเจ็บแสบ ถือเป็นประสบการณ์ภาพยนตร์ที่บ้าคลั่งและไปสุดทางจนต้องดูด้วยตาตัวเองสักครั้ง</p>
            `
        },
        'conjuring': {
            title: "The Conjuring",
            year: "2013",
            rating: "17+",
            duration: "1h 52m",
            poster: "https://image.tmdb.org/t/p/original/byWgphT74ClOVa8EOGzYDkl8DVL.jpg",
            score: "9.2",
            reviewHtml: `
                <p>The Conjuring คือหนังที่เข้ามากอบกู้ศรัทธาและสร้างมาตรฐานใหม่ให้กับหนังแนวบ้านผีสิง จุดเด่นของผู้กำกับเจมส์ วาน คือการไม่พึ่งพาฉากเลือดสาด แต่ใช้ความเงียบและจังหวะมุมกล้องบีบคั้นอารมณ์คนดูจนหายใจไม่ทั่วท้อง โดยเฉพาะฉาก "ปรบมือซ่อนแอบ" ที่เรียบง่ายแต่สร้างความสยองได้ถึงขีดสุดจนกลายเป็นฉากคลาสสิก</p>
                <p>สิ่งที่ทำให้หนังทรงพลังเหนือกว่าเรื่องอื่นคือการแสดงของคู่พระนางที่รับบทสองสามีภรรยาวอร์เรน เคมีของทั้งคู่ทำให้เรื่องราวดูสมจริงและมีมิติความเป็นมนุษย์สูง เราจึงเอาใจช่วยตัวละครด้วยความรู้สึกผูกพันจริงๆ ไม่ใช่แค่รอลุ้นให้หนีตาย บรรยากาศย้อนยุคก็ช่วยเสริมความขลังและความน่าเชื่อถือได้เป็นอย่างดี</p>
                <p>นี่คือหนังผีที่ "ครบเครื่อง" และ "สมบูรณ์แบบ" ที่สุดเรื่องหนึ่ง จังหวะหลอกมีชั้นเชิง บรรยากาศขลัง และน่ากลัวจนนาทีสุดท้าย ใครอยากดูหนังผีที่ดีที่สุด ต้องเริ่มที่เรื่องนี้</p>
                <h3>ทำไมถึงควรดู?</h3>
                <p>งานกำกับชั้นครูที่พิสูจน์ว่าความน่ากลัวไม่ได้เกิดจากเสียงดัง แต่เกิดจากบรรยากาศที่กดดัน ผสมกับการแสดงที่ยอดเยี่ยมทำให้คนดูเชื่อสนิทใจว่าเป็นเหตุการณ์จริง ถือเป็นมาสเตอร์พีซของวงการหนังสยองขวัญยุคใหม่ที่ดูจบแล้วยังต้องระแวงเงามืดในบ้านตัวเอง</p>
            `   
        },
        'midsommar': {
            title: "Midsommar",
            year: "2019",
            rating: "18+",
            duration: "2h 51m",
            poster: "https://sahamongkolfilm.com/wp-content/uploads/2019/05/Midsommar-Poster.jpg",
            score: "8.8",
            reviewHtml: `
                <p>Midsommar ฉีกกฎหนังสยองขวัญทุกเรื่องด้วยการนำเสนอความน่ากลัวท่ามกลางแสงแดดอันสดใสและทุ่งดอกไม้ที่สวยงาม เรื่องราวของกลุ่มวัยรุ่นที่เดินทางไปร่วมเทศกาลฤดูร้อนในหมู่บ้านห่างไกลของสวีเดน แต่กลับพบกับพิธีกรรมประหลาดที่ค่อยๆ ทวีความรุนแรงและบ้าคลั่งขึ้นเรื่อยๆ ภายใต้รอยยิ้มที่เป็นมิตรของชาวบ้าน</p>
                <p>จุดเด่นคือความกดดันทางจิตวิทยาที่ทำได้ยอดเยี่ยม หนังไม่ต้องพึ่งพาความมืดหรือฉากตุ้งแช่ แต่ใช้ความสว่างและความเงียบมาบีบคั้นคนดู ฉากความรุนแรงทำออกมาได้ดิบและสมจริงจนน่าตกใจ ตัดสลับกับงานภาพศิลป์ที่วิจิตรตระการตาได้อย่างน่าขนลุก นอกจากนี้ การแสดงของ Florence Pugh ยังถ่ายทอดความเจ็บปวดจากการสูญเสียและความสัมพันธ์ที่ร้าวฉานได้อย่างลึกซึ้ง ทำให้หนังมีมิติมากกว่าแค่การไล่ฆ่ากัน</p>
                <h3>ทำไมถึงควรดู?</h3>
                <p>เป็นประสบการณ์ความสยองที่หาไม่ได้จากเรื่องอื่น เพราะเรื่องราวทั้งหมดเกิดขึ้นกลางวันแสกๆ ทำให้คนดูไม่มีที่ให้หลบซ่อนสายตา งานภาพสวยงามราวกับภาพวาดแต่แฝงไปด้วยความโหดร้ายทารุณ ถือเป็นหนังที่เล่นกับความรู้สึกกดดันทางจิตวิทยาได้ดีที่สุดเรื่องหนึ่ง และเป็นบทเรียนเรื่องความสัมพันธ์ที่เจ็บแสบจนลืมไม่ลง</p>
            `
        },
        'weapons': {
            title: "Weapons",
            year: "2025",
            rating: "17+",
            duration: "2h 10m",
            poster: "https://www.mcinenews.net/wp-content/uploads/2025/05/TH_WPNS_VERT_TSR_2764x4096_INTL-691x1024.jpg",
            score: "6",
            reviewHtml: `
                <p>หนังระทึกขวัญลึกลับที่ยังไม่เข้าฉาย แต่กำลังเป็นที่จับตามองอย่างสูง จากผู้กำกับ "บาร์บี้" (Greta Gerwig) ... ไม่ใช่! จากผู้กำกับ Zach Cregger ที่เคยสร้างความสยองใน "Barbarian"</p>
                <p>Weapons คือหนังที่สอบผ่านฉลุยในเรื่องของการสร้างบรรยากาศ ความน่ากลัวไม่ได้มาจากเสียงตุ้งแช่ แต่มาจากงานภาพที่ชวนขนลุกและแปลกตา อย่างฉากเด็กเดินกางแขนที่เป็นภาพจำ รวมถึงฉากความรุนแรงที่ทำออกมาได้ดิบเถื่อน สะใจคอหนังสายโหดแบบไม่ต้องสงสัย ใครที่ชอบเสพความระทึกขวัญทางสายตา เรื่องนี้ถือว่าตอบโจทย์ได้ดี
                    อย่างไรก็ตาม ปัญหาใหญ่ที่ฉุดคะแนนของหนังลงคือการเล่าเรื่องที่ทำให้คนดูรู้สึกห่างเหิน เราไม่สามารถเอาใจช่วยตัวละครได้อย่างที่ควรจะเป็น แม้สถานการณ์ตรงหน้าจะเลวร้ายแค่ไหนก็ตาม ยิ่งเมื่อดำเนินเรื่องไปถึงตอนจบที่แม้มอบความสะใจในฉากไคลแมกซ์ให้ได้ แต่บทสรุปกลับคลุมเครือและขาดเหตุผลรองรับที่ชัดเจน ทำให้หนังจบลงแบบทิ้งความงงไว้มากกว่าความประทับใจ
                    สรุป: เหมาะสำหรับคนที่ชอบเสพงานภาพแปลกตาและความโหดแบบถึงลูกถึงคน แต่ถ้าคาดหวังความสมเหตุสมผลหรือบทที่คมคาย เรื่องนี้อาจยังไม่ใช่คำตอบ แนะนำให้ดูแบบถอดสมองเสพงานภาพจะเพลินที่สุด</p>
                <h3>ทำไมถึงควรดู?</h3>
                <p>แม้คะแนนรวมจะดูไม่สูงนัก แต่ Weapons ยังคงมีคุณค่าในตัวของมันเอง สำหรับคนที่ชื่นชอบงานภาพสวยๆ ที่แฝงความวิปริต หรือต้องการเสพความบันเทิงจากฉากโหดๆ เรื่องนี้ยังคงตอบโจทย์ได้ดี</p>
            `
        },
        'his-house': {
            title: "His House",
            year: "2020",
            rating: "17+",
            duration: "1h 33m",
            poster: "https://image.tmdb.org/t/p/original/mM1ELeOF4qmdIFbZh9VSBn685g.jpg",
            score: "9.5",
            reviewHtml: `
                <p>หนังสยองขวัญทางจิตวิทยา (Psychological Horror) จาก Netflix ที่ยอดเยี่ยมจนน่าตกใจ</p>
                <p>His House เป็นหนังสยองขวัญม้ามืดที่พิสูจน์ให้เห็นว่า "หนังผี" กับ "ดราม่าหนักๆ" สามารถผสมผสานกันได้อย่างลงตัว เรื่องราวของคู่สามีภรรยาผู้ลี้ภัยชาวซูดานใต้ที่ต้องมาอาศัยอยู่ในบ้านซ่อมซ่อของรัฐบาลอังกฤษ แล้วพบว่ามีบางสิ่งซ่อนอยู่ในกำแพง หนังทำบรรยากาศได้น่ากลัว กดดัน และมีการดีไซน์รูปลักษณ์ของผีที่แปลกตา ดูแล้วหลอนติดตาโดยไม่ต้องพึ่งฉากตุ้งแช่พร่ำเพรื่อ</p>
                <p>จุดเด่นที่ทำให้เรื่องนี้เหนือกว่าหนังผีทั่วไปคือ "ความลึกของบท" หนังเล่นกับประเด็นความรู้สึกผิดในใจของผู้รอดชีวิตได้อย่างเจ็บปวด ทำให้คนดูรู้สึกผูกพันและเอาใจช่วยตัวละครไปพร้อมกัน ต่างจากหนังบางเรื่องที่เราไม่แคร์ชะตากรรมตัวเอก แต่เรื่องนี้ความดราม่ากลับยิ่งส่งเสริมให้พาร์ทสยองขวัญดูน่าเชื่อถือและน่ากลัวขึ้นไปอีก
                    บทสรุปของเรื่องถือเป็นไม้ตายที่ทำออกมาได้ยอดเยี่ยม หนังไม่ได้จบแค่การปราบผี แต่จบด้วยการยอมรับความจริงและการอยู่ร่วมกับบาดแผลในอดีต เป็นตอนจบที่สมเหตุสมผล ทรงพลัง และเคลียร์ทุกปมที่ปูมาได้อย่างหมดจด ไม่มีอาการค้างคาใจเหมือนเรื่องอื่น</p>
                <h3>ทำไมถึงควรดู?</h3>
                <p>มันไม่ใช่แค่หนังผี แต่เป็นหนังสยองขวัญที่พูดถึงบาดแผลจากสงคราม (Trauma), ความรู้สึกผิด, และการปรับตัวในวัฒนธรรมใหม่ได้อย่างลึกซึ้งและน่าขนลุกในเวลาเดียวกัน</p>
            `
        }
    };

    // ฟังก์ชันสำหรับอ่าน URL
    function getMovieIdFromURL() {
        const queryParams = new URLSearchParams(window.location.search);
        return queryParams.get('movie'); // ดึงค่าจาก ?movie=...
    }

    // ฟังก์ชันสำหรับเติมข้อมูล
    function populateReviewPage(movieId) {
        const movieData = reviewDatabase[movieId]; // ไปดึงข้อมูลจาก Database

        if (movieData) {
            document.getElementById('movie-title-placeholder').innerText = movieData.title;
            document.getElementById('movie-year-placeholder').innerText = movieData.year;
            document.getElementById('movie-rating-placeholder').innerText = movieData.rating;
            document.getElementById('movie-duration-placeholder').innerText = movieData.duration;
            document.getElementById('movie-poster-placeholder').src = movieData.poster;
            document.getElementById('movie-poster-placeholder').alt = movieData.title;
            document.getElementById('movie-score-placeholder').innerText = movieData.score;
            document.getElementById('movie-review-text-placeholder').innerHTML = movieData.reviewHtml;
            document.title = `Review: ${movieData.title}`;
        } else {
            // ถ้าไม่เจอ (เช่น ใส่ ?movie=abc มั่ว ๆ มา)
            document.getElementById('movie-title-placeholder').innerText = "ไม่พบรีวิว (404)";
            document.getElementById('review-content-wrapper').innerHTML = "<p style='text-align: center; width: 100%;'>ไม่พบข้อมูลหนังที่คุณค้นหา กรุณากลับไปที่หน้าแรก</p>";
        }
    }

    const movieId = getMovieIdFromURL();
    
    if (movieId) {
        populateReviewPage(movieId); // ถ้ามี
    } else {
        // ถ้าไม่มี 
        populateReviewPage('evil-dead'); 
    }

}